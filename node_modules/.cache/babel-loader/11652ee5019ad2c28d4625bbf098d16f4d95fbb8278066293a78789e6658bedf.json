{"ast":null,"code":"import _objectSpread from\"/home/juhar/Desktop/microverse-projects/Booking-health-service/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/juhar/Desktop/microverse-projects/Booking-health-service/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/juhar/Desktop/microverse-projects/Booking-health-service/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{LOGIN_SUCCESS,LOGIN_FAIL,SIGNUP_SUCCESS,SIGNUP_FAIL,LOGOUT}from'../types';import{getToken,createAccount}from'../../APIs/user';var initialState={token:null,isAuthenticated:false,error:null,success:null};export var login=function login(reqBody){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getToken(reqBody);case 3:token=_context.sent;localStorage.setItem('token',token);dispatch({type:LOGIN_SUCCESS,payload:token});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch({type:LOGIN_FAIL,payload:_context.t0.message});case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:localStorage.removeItem('token');dispatch({type:LOGOUT});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var signup=function signup(reqBody){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var success;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return createAccount(reqBody);case 3:success=_context3.sent;dispatch({type:SIGNUP_SUCCESS,payload:success});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:SIGNUP_FAIL,payload:_context3.t0});case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case LOGIN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{token:action.payload,isAuthenticated:true});case LOGIN_FAIL:return _objectSpread(_objectSpread({},state),{},{error:action.payload});case SIGNUP_SUCCESS:return _objectSpread(_objectSpread({},state),{},{success:true,message:action.payload});case SIGNUP_FAIL:return _objectSpread(_objectSpread({},state),{},{success:false,error:action.payload});case LOGOUT:return{success:true,isAuthenticated:false,token:null};default:return state;}};","map":{"version":3,"names":["LOGIN_SUCCESS","LOGIN_FAIL","SIGNUP_SUCCESS","SIGNUP_FAIL","LOGOUT","getToken","createAccount","initialState","token","isAuthenticated","error","success","login","reqBody","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","wrap","_callee$","_context","prev","next","sent","localStorage","setItem","type","payload","t0","message","stop","_x","apply","arguments","logout","_ref2","_callee2","_callee2$","_context2","removeItem","_x2","signup","_ref3","_callee3","_callee3$","_context3","_x3","authReducer","state","length","undefined","action","_objectSpread"],"sources":["/home/juhar/Desktop/microverse-projects/Booking-health-service/src/redux/auth/auth.js"],"sourcesContent":["import {\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  SIGNUP_SUCCESS,\n  SIGNUP_FAIL,\n  LOGOUT,\n} from '../types';\nimport { getToken, createAccount } from '../../APIs/user';\n\nconst initialState = {\n  token: null,\n  isAuthenticated: false,\n  error: null,\n  success: null,\n};\n\nexport const login = (reqBody) => async (dispatch) => {\n  try {\n    const token = await getToken(reqBody);\n    localStorage.setItem('token', token);\n    dispatch({ type: LOGIN_SUCCESS, payload: token });\n  } catch (error) {\n    dispatch({ type: LOGIN_FAIL, payload: error.message });\n  }\n};\n\nexport const logout = () => async (dispatch) => {\n  localStorage.removeItem('token');\n  dispatch({ type: LOGOUT });\n};\n\nexport const signup = (reqBody) => async (dispatch) => {\n  try {\n    const success = await createAccount(reqBody);\n    dispatch({ type: SIGNUP_SUCCESS, payload: success });\n  } catch (error) {\n    dispatch({ type: SIGNUP_FAIL, payload: error });\n  }\n};\n\nexport const authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      return { ...state, token: action.payload, isAuthenticated: true };\n    case LOGIN_FAIL:\n      return { ...state, error: action.payload };\n    case SIGNUP_SUCCESS:\n      return { ...state, success: true, message: action.payload };\n    case SIGNUP_FAIL:\n      return { ...state, success: false, error: action.payload };\n    case LOGOUT:\n      return { success: true, isAuthenticated: false, token: null };\n    default:\n      return state;\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}